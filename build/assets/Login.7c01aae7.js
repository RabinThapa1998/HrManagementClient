var w=Object.defineProperty,y=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var g=(e,t,s)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,l=(e,t)=>{for(var s in t||(t={}))S.call(t,s)&&g(e,s,t[s]);if(p)for(var s of p(t))C.call(t,s)&&g(e,s,t[s]);return e},i=(e,t)=>y(e,v(t));import{r as d,R as u,d as N,a as m,l as h,b as a,j as f,e as D}from"./index.16cd437f.js";import{a as k}from"./index.becf6c0c.js";function b(e=u){const t=e===u?N:()=>d.exports.useContext(e);return function(){const{store:o}=t();return o}}const R=b();function L(e=u){const t=e===u?R:b(e);return function(){return t().dispatch}}const j=L(),H=()=>{const[e,t]=d.exports.useState({username:"",password:""}),[s,o]=d.exports.useState({disabled:!1}),c=j();return d.exports.useEffect(()=>{m.get("token")&&c(h({token:!0}))},[]),a("div",{className:"grid place-items-center bg-gray-100 h-screen w-screen font-inter",children:f("div",{className:" w-1/4 shadow-2xl rounded-lg bg-white py-5 px-4",children:[a("h1",{className:"text-3xl font-bold text-center text-sidebar",children:"Login"}),a("form",{onSubmit:n=>{o({disabled:!0});const x="https://hrpayroll.nepadristi.com/api/v1";n.preventDefault(),k.post(`${x}/auths/login`,{email:e.username,password:e.password}).then(r=>{c(h({token:!0})),c(D({logindetails:r.data.data.userDetails})),m.set("token",r.data.data.token,{sameSite:"none",secure:!0}),m.set("roleId",r.data.data.userDetails.roleId,{sameSite:"none",secure:!0})}).catch(r=>{console.log(r.message),alert("Invalid Credentials"),o({disabled:!1})})},children:f("div",{className:"flex flex-col items-center justify-center my-20 py-6 w-full",children:[a("label",{htmlFor:"username",className:"text-lg font-bold my-2 text-left w-full text-gray-500",children:"Username"}),a("input",{type:"username",name:"username",id:"username",value:e.username,className:"h-10 bg-slate-100 focus:outline-blue-400 focus:bg-slate-300 w-full",onChange:n=>t(i(l({},e),{username:n.target.value}))}),a("label",{htmlFor:"password",className:"text-lg font-bold mb-2 mt-5  text-left w-full text-gray-500",children:"Password"}),a("input",{type:"password",name:"password",id:"password",value:e.password,className:"h-10 bg-slate-100 focus:outline-blue-400 focus:bg-slate-300 w-full",onChange:n=>t(i(l({},e),{password:n.target.value}))}),a("button",i(l({className:"bg-sidebar rounded hover:shadow-lg py-2 px-14 text-white text-lg mt-12 disabled:bg-slate-400 disabled:cursor-wait ",type:"submit"},s),{children:"Login"}))]})})]})})};export{H as default};
